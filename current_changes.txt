diff --git a/.gitignore b/.gitignore
index fa2aae2..1ff5ba8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -199,4 +199,7 @@ isometric_tests/*
 data
 data/*
 
-**/*.DS_Store
\ No newline at end of file
+**/*.DS_Store
+
+src/visualize_terrain_gen.py
+notes.txt
\ No newline at end of file
diff --git a/assets/sprites/6_fox.png b/assets/sprites/6_fox.png
index 68d7d83..2f320fa 100644
Binary files a/assets/sprites/6_fox.png and b/assets/sprites/6_fox.png differ
diff --git a/notes.txt b/notes.txt
index dbeafea..8775820 100644
--- a/notes.txt
+++ b/notes.txt
@@ -1,2 +1,4 @@
 BUGS TO LOOK INTO
-1. There is bug when loading entity data in chunks (often comes after a crash or reloading a chunk)
\ No newline at end of file
+1. There is bug when loading entity data in chunks (often comes after a crash or reloading a chunk)
+2. Current Astar does not take into account size of entity
+3. Posistion will break when non-square entities rotate since we track from top left (might need to rework entities to track from middle)
diff --git a/src/constants.py b/src/constants.py
index 4df3f56..55bfc31 100644
--- a/src/constants.py
+++ b/src/constants.py
@@ -4,7 +4,7 @@ import math
 GAME_NAME = "My Game [Change Name Later]"
 SCREEN_INIT_SIZE = (1280, 960)
 FRAME_CAP = 60
-TEMP_MOVEMENT_FACTOR = 6 * 2
+TEMP_MOVEMENT_FACTOR = 6 
 DISPLAY_SIZE = (640, 360)
 # DISPLAY_SIZE = (960, 540)
 # DISPLAY_SIZE = (3440, 1440)
diff --git a/src/decorators.py b/src/decorators.py
index 76d144c..aba11f9 100644
--- a/src/decorators.py
+++ b/src/decorators.py
@@ -73,11 +73,9 @@ def generate_shadow(
         if override_serve_shadow_entity:
            
             def serve_shadow(self):
-                draw_location = self.draw_location() - self.render_offset.location[:-1] + np.array([-length * Coord.BASIS[0, 0], -width * Coord.BASIS[1, 0]])
-                draw_location[1] -= np.floor(self.location.z * Coord.BASIS[1, 2])
                 return RenderObj(
                     self.SHADOW_ID + int(self.rotated),
-                    draw_location,
+                    self.draw_location() - self.render_offset.location[:-1],
                     (shade_level, self.location.x, self.location.y, self.location.z),
                     isShadow=True
                 )
diff --git a/src/system/asset_drawer.py b/src/system/asset_drawer.py
index 87bc58a..fe4764f 100644
--- a/src/system/asset_drawer.py
+++ b/src/system/asset_drawer.py
@@ -37,7 +37,8 @@ class AssetDrawer:
         else:
             tinted_img = tile_img
 
-        working_display.blit(tinted_img, tile.location.as_view_coord() - cam_offset)
+        tile_rect = tinted_img.get_rect(center=(tile.location.as_view_coord() - cam_offset))
+        working_display.blit(tinted_img, tile_rect)
 
 
     def draw_sprite(self, sprite: RenderObj, cam_offset: NDArray[np.float64], display=None) -> None:
@@ -48,7 +49,8 @@ class AssetDrawer:
         if sprite.mask:
             sprite_surface = self._tint_surface(sprite_surface.copy(), sprite.mask)
 
-        working_display.blit(sprite_surface, sprite.draw_location - cam_offset)
+        sprite_rect = sprite_surface.get_rect(center=sprite.draw_location - cam_offset)
+        working_display.blit(sprite_surface, sprite_rect)
 
     def blit_dot(self, world_location: Coord, cam_offset:  NDArray[np.float64], color=(255, 0, 0), radius=2, display=None) -> None:
         working_display = self.display if display is None else display
@@ -63,6 +65,7 @@ class AssetDrawer:
         self.blit_dot(location + Coord.math(size.x, 0, 0), cam_offset, color, radius, display)
         self.blit_dot(location + Coord.math(0, size.y, 0), cam_offset, color, radius, display)
         self.blit_dot(location + size, cam_offset, color, radius, display)
+        self.blit_dot(loc, cam_offset, (255, 0, 0), radius - 1, display)
 
 
     def _tint_surface(self, img: pygame.Surface, tint: RGBA):
diff --git a/src/system/entities/character.py b/src/system/entities/character.py
index 75489f4..f6f65f3 100644
--- a/src/system/entities/character.py
+++ b/src/system/entities/character.py
@@ -1,7 +1,7 @@
 import random
 import math
 import numpy as np
-from typing import Callable, Self, Set, Tuple, List, Any
+from typing import Callable, Self, Set, Tuple, List, Any, Optional
 from utils.coords import Coord
 from system.render_obj import RenderObj
 from system.entities.entity import Entity
@@ -226,15 +226,10 @@ class Character(Entity):
 
     # Can override update for testing     
     def update(self, dt, onscreen=True):
+        return
         self._apply_damage_animation()
         if random.random() < 0.02: 
             self._spawn_damage_number(-1)
             self._start_damage_animation()
 
-    
-
-    
-    
-            
-
 
diff --git a/src/system/entities/entity_manager.py b/src/system/entities/entity_manager.py
index c1795c4..a8d03b5 100644
--- a/src/system/entities/entity_manager.py
+++ b/src/system/entities/entity_manager.py
@@ -87,7 +87,6 @@ class EntityManager:
         render_objs.extend(self.shadows.get_shadow_objs(player.get_shadow()))
         render_objs.sort(key= lambda r_obj: r_obj.render_order)
 
-       # print(type(render_objs[-1]), render_objs[-1].draw_location, render_objs[-1].render_order)
         return render_objs
     
     def get_and_removed_chunk_entities(self, chunk: Chunk) -> List[Entity]:
diff --git a/src/system/entities/entity_types.py b/src/system/entities/entity_types.py
deleted file mode 100644
index d4572cd..0000000
--- a/src/system/entities/entity_types.py
+++ /dev/null
@@ -1,7 +0,0 @@
-from enum import Enum
-
-class EntityTypes(Enum):
-    STATIC = 1
-    CHARACTER = 2
-    PROJECTILE = 3
-    NONE = 4
\ No newline at end of file
diff --git a/src/system/entities/physics/collisions.py b/src/system/entities/physics/collisions.py
index b03caa2..e576b72 100644
--- a/src/system/entities/physics/collisions.py
+++ b/src/system/entities/physics/collisions.py
@@ -1,7 +1,7 @@
 from enum import Enum
 from system.entities.entity import Entity
 from utils.generate_unique_entity_pair_string import generate_unique_entity_pair_string
-from system.entities.entity_types import EntityTypes
+from system.entities.types.entity_types import EntityTypes
 from typing import List, Dict
 from constants import MAX_COLLISION_PASSES
 from system.game_clock import game_clock
@@ -48,6 +48,7 @@ def center_hit_box(location, size):
     top_left = location.copy()
     top_left.x = top_left.x - size.x / 2
     top_left.y = top_left.y - size.y / 2
+    # top_left.x -= size.x
     return top_left, size
 
 def get_entity_velocities(unique_collision_pairs: Dict[str, List[Entity]]) -> Dict[Entity, float]:
@@ -72,7 +73,6 @@ def resolve_collisions(unique_collision_pairs: Dict[str, List[Entity]]) -> None:
                 *center_hit_box(e1.location, e1.size), 
                 *center_hit_box(e2.location, e2.size)
             ): 
-                # print("collision")
                 e1.handle_collision(velocities[e1], e2, velocities[e2], timestep)
                 e2.handle_collision(velocities[e2], e1, velocities[e1], timestep)
                 stable = False
@@ -80,5 +80,4 @@ def resolve_collisions(unique_collision_pairs: Dict[str, List[Entity]]) -> None:
         if stable:
             break
     
-    # print("no collision")
                 
\ No newline at end of file
diff --git a/src/system/entities/physics/shadows.py b/src/system/entities/physics/shadows.py
index 226a0b5..6610611 100644
--- a/src/system/entities/physics/shadows.py
+++ b/src/system/entities/physics/shadows.py
@@ -40,8 +40,11 @@ class Triangle:
         v1 = Coord.math(B.x - A.x, B.y - A.y, 0)  
         v2 = Coord.math(x - A.x, y - A.y, 0)
 
-        dot00 = v0.dot_2D(v0); dot01 = v0.dot_2D(v1); dot02 = v0.dot_2D(v2)
-        dot11 = v1.dot_2D(v1); dot12 = v1.dot_2D(v2)
+        dot00 = v0.dot_2D(v0)
+        dot01 = v0.dot_2D(v1)
+        dot02 = v0.dot_2D(v2)
+        dot11 = v1.dot_2D(v1) 
+        dot12 = v1.dot_2D(v2)
 
         denom = dot00 * dot11 - dot01 * dot01
         if abs(denom) < eps: return False
@@ -208,10 +211,11 @@ class Shadows:
                 occ = self._blur_surface(occ, passes=1)
                 shadow_surf.blit(occ, (0, 0), special_flags=pygame.BLEND_RGBA_SUB)
 
+            x, y = min_x + (max_x - min_x) / 2, min_y + (max_y - min_y) / 2
             render_obs.append(
                 RenderObj(
                     None,
-                    np.array([min_x, min_y]),
+                    np.array([x, y]),
                     (receiver.shade_level, centriod.x, centriod.y, receiver.ref_z),
                     isShadow=True,
                     img=shadow_surf,
diff --git a/src/system/entities/sheet.py b/src/system/entities/sheet.py
index 891c7a7..2401dbc 100644
--- a/src/system/entities/sheet.py
+++ b/src/system/entities/sheet.py
@@ -19,7 +19,6 @@ class SheetManager:
         for file in paths:
             name = file.name[file.name.find('_')+1:file.name.find('.')]
             img = pygame.image.load(file).convert_alpha()
-            img.set_colorkey((0, 0, 0))
             self.sprites.append(SpriteSheet(img, name))
 
         next_id = len(self.sprites)
@@ -56,7 +55,7 @@ class SpriteSheet:
     
     def _get_frame(self, frame: int) -> pygame.Surface:
         x, y, w, h = self.data[frame]
-        sprite = pygame.Surface((w, h))
+        sprite = pygame.Surface((w, h), pygame.SRCALPHA)
         sprite.blit(self.img, (0, 0), (x, y, w, h))
         return sprite
 
diff --git a/src/system/entities/sprites/fox.py b/src/system/entities/sprites/fox.py
index a3216aa..d41ff9b 100644
--- a/src/system/entities/sprites/fox.py
+++ b/src/system/entities/sprites/fox.py
@@ -1,15 +1,16 @@
+import pygame
 import random
 from utils.coords import Coord
-from system.entities.character import Character
+from system.entities.npc import NPC
 from utils.types.shade_levels import ShadeLevel
 from decorators import register_entity, generate_shadow
 
 @register_entity
-@generate_shadow(1, 1, fade=0.5)
-class Fox(Character):
+@generate_shadow(0.65, 0.4, fade=0.5)
+class Fox(NPC):
     def __init__(self, location: Coord):
         entity_args = [
-            location, Coord.math(0.5, 0.5, 3), 0, Coord.math(0, 0, 0)
+            location, Coord.math(0.25, 0.25, 0.25), 6, Coord.math(0, -5, 0)
         ]
 
         super().__init__(
@@ -18,4 +19,24 @@ class Fox(Character):
             30 + random.randint(0, 10), 15, 15, 30 + random.randint(0, 10), 20, 15,
             0.5, 0, 1.25
         )
-    def shade_level(self): return ShadeLevel.UI
+
+        self.rotated = False
+        self.frame = 0
+    
+    def shade_level(self): return 10
+
+    def _set_frame(self, frame: int) -> None:
+        self.frame = frame
+        self.rotated = frame >= 8
+
+    def get_render_objs(self):
+        render_objs = super().get_render_objs()
+        for obj in render_objs: obj.frame = self.frame
+        return render_objs
+    
+    def update(self, dt, onscreen):
+        super().update(dt, onscreen)
+        keys = pygame.key.get_pressed()
+        for i in range(10):
+            if keys[pygame.K_0 + i]:
+                self._set_frame(i - 1)
\ No newline at end of file
diff --git a/src/system/entities/sprites/player.py b/src/system/entities/sprites/player.py
index 6ef8cba..861e09b 100644
--- a/src/system/entities/sprites/player.py
+++ b/src/system/entities/sprites/player.py
@@ -25,7 +25,7 @@ class Player(Entity):
 
     def init_human(self, location: Coord):
         size = Coord.math(.25, .25, 1.25)
-        render_offset = Coord.math(-8, -18, 0)
+        render_offset = Coord.math(0, -9, 0)
         img_id = 1
         super().__init__(location, size, img_id, render_offset)
 
@@ -53,9 +53,10 @@ class Player(Entity):
         return self.last_drawn_location + self.render_offset.location[:-1]
     
     def get_shadow(self) -> EllipseData:
+        x, y = self.draw_location()
         return EllipseData(
-            Coord.view(self.last_drawn_location[0], self.last_drawn_location[1], self.location.z),
-            0.5, 0.5, 0
+            Coord.view(x, y, self.location.z),
+            1, 1, 0
         )
     
     # TODO: Better collision handling (ie special handling for static opbjects and so on)
diff --git a/src/system/entities/sprites/tree.py b/src/system/entities/sprites/tree.py
index 20581ca..2e1df5f 100644
--- a/src/system/entities/sprites/tree.py
+++ b/src/system/entities/sprites/tree.py
@@ -16,7 +16,7 @@ class Tree(Entity):
         self.trunk_img_id = 2
         self.canopy_img_id = 3 + int(snowy)
         size = Coord.world(0.5, 0.5, 3)
-        render_offset = Coord.math(-24, -76, 0) # Coord.math(-8, 48, 0)
+        render_offset = Coord.math(0, -36, 0) #Coord.math(-24, -76, 0) # Coord.math(-8, 48, 0)
         super().__init__(location, size, img_id, render_offset)
 
     def get_render_objs(self):
@@ -38,8 +38,8 @@ class Tree(Entity):
         p0 = self.location.copy()
 
         # parameter tunning
-        p0.x -= 0.45
-        p0.y += 0.35
+        p0.x -= 0.23
+        p0.y += 0.18
         p0.z = 4.15
         scale = 0.65
 
diff --git a/src/system/renderer.py b/src/system/renderer.py
index 51087b8..026d82e 100644
--- a/src/system/renderer.py
+++ b/src/system/renderer.py
@@ -22,15 +22,23 @@ class Renderer:
         for entity in map.get_entities_to_render():
             self.asset_drawer.draw_sprite(entity, cam_screen_i)
 
-            # If hitboxes are turned on draw hitbox corners
-            if game_globals.show_hitboxes_on and not entity.isShadow and entity.location and entity.size:
-                self.asset_drawer.mark_hitbox(entity.location, entity.size, cam_screen_i, color=(0, 255, 0))
+        # If hitboxes are turned on draw hitbox corners
+        if game_globals.show_hitboxes_on:
+            for entity in map.get_entities_to_render():
+                if not entity.isShadow and entity.location and entity.size:
+                    self.asset_drawer.mark_hitbox(entity.location, entity.size, cam_screen_i, color=(0, 255, 0))
 
         
         # If debug mode is on render debug elements
         if game_globals.render_debug:
             self._render_dubug_elements(map, screen, cam_screen_i)
 
+        from utils.coords import Coord
+        self.asset_drawer.blit_dot(Coord.math(-2.73, 2.68, 4.15), cam_screen_i, (0, 0, 0))
+        self.asset_drawer.blit_dot(Coord.math(-3.15, 1.85, 1.0), cam_screen_i, (255, 0, 0))
+        self.asset_drawer.blit_dot(Coord.math(-1.85, 1.85, 1.0), cam_screen_i, (0, 255, 0))
+        self.asset_drawer.blit_dot(Coord.math(-1.85, 3.15, 1.0), cam_screen_i, (0, 0, 255))
+
         return len(tiles_to_render)
     
     def _render_dubug_elements(self, map: Map, screen: Screen, cam_screen_i: NDArray[np.float64]) -> None:
diff --git a/src/utils/coords.py b/src/utils/coords.py
index e2a6077..b944f37 100644
--- a/src/utils/coords.py
+++ b/src/utils/coords.py
@@ -137,6 +137,8 @@ class Coord:
     def manhattan_2D(self, other): return np.sum(np.abs(self.location[:2] - self._coerce(other)[:2]))
     def euclidean(self, other): return np.linalg.norm(self.location - self._coerce(other))
     def euclidean_2D(self, other): return np.linalg.norm(self.location[:2] - self._coerce(other)[:2])
+    def floor_world(self): return Coord(np.floor(self.location))
+    def floor_chunk(self): return Coord(np.floor(self.location /CHUNK_SIZE) * CHUNK_SIZE)
 
 
     # --- arithmetic (new object) ---
diff --git a/src/world/astar.py b/src/world/astar.py
index 8ee64f8..6e99f61 100644
--- a/src/world/astar.py
+++ b/src/world/astar.py
@@ -1,7 +1,7 @@
 import math
 import heapq
 import random
-from world.map import Map
+# from world.map import Map
 from utils.coords import Coord
 from typing import Dict, Self, Optional, List, Callable, Dict
 from world.tile import Tile
@@ -17,8 +17,10 @@ class Node:
     parent: Optional[Coord] = None
 
 
+# !!! Need to make this robust to different size entities !!!
+
 class AstarJob:
-    def __init__(self, start: Coord, destination: Coord, map: Map, is_blocked: Callable[[Tile], bool]):
+    def __init__(self, start: Coord, destination: Coord, map , is_blocked: Callable[[Tile], bool]):
         self.map = map
         self.start = start
         self.destination = destination
@@ -131,7 +133,7 @@ class AstarManager:
         self.recycled_ids.append(job)
         return result
 
-    def bind_map(self, map: Map) -> None:
+    def bind_map(self, map) -> None:
         self.map = map
     
     def reset_map(self) -> None:
diff --git a/src/world/generation/terrain_generator.py b/src/world/generation/terrain_generator.py
index 096e5cd..0dbe3ab 100644
--- a/src/world/generation/terrain_generator.py
+++ b/src/world/generation/terrain_generator.py
@@ -112,7 +112,7 @@ class TerrainGenerator:
         if biome == Biome.DESERT: return
         noise_value = noise.pnoise2(x / 100, y / 100, **asdict(self.forest_noise))
         if noise_value < 0 and self.rng.random() < FOREST_DENSITY:
-            return Tree(Coord.world(x, y), snowy=(biome==Biome.TUNDRA))
+            return Tree(Coord.world(x - 0.5, y + 0.5), snowy=(biome==Biome.TUNDRA))
         
 
     def _biome_weights(self, x: int, y: int) -> Dict[Biome, float]:
@@ -152,6 +152,7 @@ class TerrainGenerator:
         tile = self._get_tile(x, y, biome_w, onborder)
         if self._is_water_tile(tile): return tile, None
         if tree := self._get_tree(x, y, biome):
+            tile.has_obsticle = True
             return tile, tree
         return tile, None
 
diff --git a/src/world/path_finder.py b/src/world/path_finder.py
index 36c5d84..ac91a64 100644
--- a/src/world/path_finder.py
+++ b/src/world/path_finder.py
@@ -1,13 +1,12 @@
 from utils.coords import Coord
 from collections import deque
 from world.astar import AstarManager
+from world.tile import Tile
 from decorators import singleton
 from constants import PATH_FINDER_CPT
 from typing import TYPE_CHECKING, Callable, Optional, List
 
-
 if TYPE_CHECKING:
-    from world.map import Map
     from world.tile import Tile
 
 @singleton
